---

---

<button
    id="back-to-top"
    aria-label="Back to Top"
    class="fixed bottom-6 right-6 z-50 p-0 rounded-full bg-gunmetal/80 backdrop-blur-sm shadow-lg shadow-black/20 translate-y-24 opacity-0 pointer-events-none transition-all duration-500 hover:scale-110 group"
>
    <!-- Progress Ring Container -->
    <div class="relative w-12 h-12 flex items-center justify-center">
        <!-- Background Ring -->
        <svg
            class="absolute inset-0 w-full h-full -rotate-90"
            viewBox="0 0 36 36"
        >
            <path
                class="text-white/10"
                d="M18 2.0845
          a 15.9155 15.9155 0 0 1 0 31.831
          a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none"
                stroke="currentColor"
                stroke-width="3"></path>
            <!-- Progress Ring -->
            <path
                id="scroll-progress"
                class="text-[#c08b5a] transition-all duration-100 ease-out"
                stroke-dasharray="100 100"
                stroke-dashoffset="100"
                pathLength="100"
                d="M18 2.0845
          a 15.9155 15.9155 0 0 1 0 31.831
          a 15.9155 15.9155 0 0 1 0 -31.831"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
                stroke-linecap="round"></path>
        </svg>

        <!-- Arrow Icon -->
        <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2.5"
            stroke="currentColor"
            class="w-5 h-5 text-[#c08b5a] group-hover:text-white transition-colors relative z-10"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M4.5 15.75l7.5-7.5 7.5 7.5"></path>
        </svg>
    </div>
</button>

<script>
    function initScrollToTop() {
        const backToTopButton = document.getElementById("back-to-top");
        const progressRing = document.getElementById("scroll-progress");

        if (!backToTopButton || !progressRing) return;

        const toggleVisibility = () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight;
            const winHeight = window.innerHeight;
            const scrollTotal = docHeight - winHeight;

            let scrollPercentage = 0;
            if (scrollTotal > 0) {
                scrollPercentage = (scrollTop / scrollTotal) * 100;
            }

            // Update Progress stroke
            const offset = 100 - Math.min(100, Math.max(0, scrollPercentage));
            progressRing.style.strokeDashoffset = offset.toString();

            // Toggle visibility
            if (scrollTop > 300) {
                backToTopButton.classList.remove(
                    "translate-y-24",
                    "opacity-0",
                    "pointer-events-none",
                );
                backToTopButton.classList.add(
                    "translate-y-0",
                    "opacity-100",
                    "pointer-events-auto",
                );
            } else {
                backToTopButton.classList.remove(
                    "translate-y-0",
                    "opacity-100",
                    "pointer-events-auto",
                );
                backToTopButton.classList.add(
                    "translate-y-24",
                    "opacity-0",
                    "pointer-events-none",
                );
            }
        };

        const scrollToTop = () => {
            window.scrollTo({
                top: 0,
                behavior: "smooth",
            });
        };

        // Clean up previous listeners if re-initializing
        window.removeEventListener("scroll", toggleVisibility);
        backToTopButton.removeEventListener("click", scrollToTop);

        // Add listeners
        window.addEventListener("scroll", toggleVisibility, { passive: true });
        backToTopButton.addEventListener("click", scrollToTop);

        // Initial check
        toggleVisibility();
    }

    // Run on load
    initScrollToTop();

    // Support Astro View Transitions
    document.addEventListener("astro:page-load", initScrollToTop);
</script>
