---
import { getRelativeLocaleUrl } from "../i18n/utils";

const enUrl = getRelativeLocaleUrl("en", "");
const esUrl = getRelativeLocaleUrl("es", "");
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Redirecting...</title>
        <!-- Default fallback for no-JS -->
        <meta http-equiv="refresh" content={`0;url=${enUrl}`} />
        <script define:vars={{ enUrl, esUrl }}>
            try {
                // Check browser language
                const lang = navigator.language || navigator.userLanguage;
                if (lang && lang.startsWith("es")) {
                    window.location.replace(esUrl);
                } else {
                    window.location.replace(enUrl);
                }
            } catch (e) {
                // Fallback
                window.location.replace(enUrl);
            }
        </script>
    </head>
    <body
        class="bg-gunmetal text-white flex items-center justify-center h-screen"
    >
        <noscript>
            <p>
                Redirecting to <a href={enUrl}>{enUrl}</a>...
            </p>
        </noscript>
    </body>
</html>
