---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
    return [{ params: { lang: "en" } }, { params: { lang: "es" } }];
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);

const certifications = await getCollection("certifications");
---

<Layout title={`Portfolio | ${t("nav.about")}`} lang={lang}>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        {/* Bio Section */}
        <section class="mb-20">
            <h1
                class="text-4xl md:text-5xl font-heading font-bold text-light mb-8"
            >
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-white"
                >
                    {t("nav.about")}
                </span>
            </h1>

            <div class="prose prose-invert prose-lg text-gray-400">
                <p>
                    {
                        lang === "en"
                            ? "I am a 24-year-old Systems Engineer passionate about building robust, scalable architectures. My expertise lies in Backend Development with Java/Spring, Cloud Solutions with AWS, and exploring the frontiers of Data Science."
                            : "Soy un Ingeniero de Sistemas de 24 años apasionado por construir arquitecturas robustas y escalables. Mi experiencia se centra en el Desarrollo Backend con Java/Spring, Soluciones Cloud con AWS y la exploración de la Ciencia de Datos."
                    }
                </p>
                <p>
                    {
                        lang === "en"
                            ? "I bridge the gap between complex engineering problems and elegant, user-centric solutions. With a focus on performance and reliability, I aim to create digital ecosystems that stand the test of time."
                            : "Conecto problemas de ingeniería complejos con soluciones elegantes centradas en el usuario. Con un enfoque en el rendimiento y la fiabilidad, aspiro a crear ecosistemas digitales que perduren en el tiempo."
                    }
                </p>
            </div>
        </section>

        {/* Certifications Section */}
        <section>
            <h2
                class="text-3xl font-heading font-bold text-light mb-8 flex items-center"
            >
                <span class="mr-4">{t("nav.certifications")}</span>
                <div class="h-px bg-white/10 flex-grow"></div>
            </h2>

            <div class="grid gap-6 md:grid-cols-2">
                {
                    certifications.map((cert) => (
                        <a
                            href={cert.data.url}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="block p-6 rounded-xl bg-charcoal border border-white/5 hover:border-gold/30 transition-all hover:shadow-lg hover:shadow-gold/5 group"
                        >
                            <div class="flex items-start gap-4">
                                {cert.data.badge && (
                                    <img
                                        src={cert.data.badge}
                                        alt={cert.data.name}
                                        class="w-16 h-16 object-contain"
                                    />
                                )}
                                <div>
                                    <h3 class="text-lg font-bold text-light group-hover:text-gold transition-colors">
                                        {cert.data.name}
                                    </h3>
                                    <p class="text-sm text-gray-400">
                                        {cert.data.issuer}
                                    </p>
                                    <p class="text-xs text-gray-500 mt-2">
                                        {cert.data.date}
                                    </p>
                                </div>
                            </div>
                        </a>
                    ))
                }
            </div>
        </section>
    </div>
</Layout>
